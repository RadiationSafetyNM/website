<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="대한핵의학회 방사선안전위원회">
<meta name="description" content="핵의학 영상품질과 선량최적화를 위한 사이트입니다.  Consensus 및 정리가 필요하므로 최적화팀만 참고하시길 바랍니다.">

<title>영상품질·선량최적화 – 방사선안전관리</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles/tooltip.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../KSNM_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">방사선안전관리</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts/manual.html"> 
<span class="menu-text">사이트사용법</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/law/law.html"> 
<span class="menu-text">법령·규칙·고시</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/practice/practice.html"> 
<span class="menu-text">안전관리실무</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../posts/optimization/optimization.html" aria-current="page"> 
<span class="menu-text">영상품질·선량최적화</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/suggestion/index.html"> 
<span class="menu-text">규제개선제안</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">블로그</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/ICRP/icrp.html"> 
<span class="menu-text">ICRP출판물</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/link.html"> 
<span class="menu-text">관련 사이트</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../posts/optimization/optimization.html">영상품질·선량최적화</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">영상품질·선량최적화</h1>
                  <div>
        <div class="description">
          핵의학 영상품질과 선량최적화를 위한 사이트입니다.<br> Consensus 및 정리가 필요하므로 최적화팀만 참고하시길 바랍니다.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">영상품질</div>
                <div class="quarto-category">선량</div>
                <div class="quarto-category">최적화</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>대한핵의학회<br>방사선안전위원회 </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2025.2.14</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">2025.2.14</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/optimization.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">영상품질·선량최적화</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#기존의-문제점." id="toc-기존의-문제점." class="nav-link active" data-scroll-target="#기존의-문제점.">기존의 문제점.</a></li>
  <li><a href="#대안1." id="toc-대안1." class="nav-link" data-scroll-target="#대안1.">대안1.</a></li>
  <li><a href="#대안2." id="toc-대안2." class="nav-link" data-scroll-target="#대안2.">대안2.</a>
  <ul>
  <li><a href="#간-변이계수" id="toc-간-변이계수" class="nav-link" data-scroll-target="#간-변이계수">간 변이계수</a>
  <ul class="collapse">
  <li><a href="#임상영상의-질-지표-가능성" id="toc-임상영상의-질-지표-가능성" class="nav-link" data-scroll-target="#임상영상의-질-지표-가능성">임상영상의 질 지표 가능성</a></li>
  </ul></li>
  <li><a href="#수정된-지표-제안" id="toc-수정된-지표-제안" class="nav-link" data-scroll-target="#수정된-지표-제안">수정된 지표 제안</a>
  <ul class="collapse">
  <li><a href="#기존의-제안" id="toc-기존의-제안" class="nav-link" data-scroll-target="#기존의-제안">기존의 제안</a></li>
  <li><a href="#수정-제안" id="toc-수정-제안" class="nav-link" data-scroll-target="#수정-제안">수정 제안</a></li>
  <li><a href="#수정제안-부가제안에-대한-세부-설명" id="toc-수정제안-부가제안에-대한-세부-설명" class="nav-link" data-scroll-target="#수정제안-부가제안에-대한-세부-설명">수정제안 + 부가제안에 대한 세부 설명</a></li>
  <li><a href="#icrp-135-인용이-필요한-부분들" id="toc-icrp-135-인용이-필요한-부분들" class="nav-link" data-scroll-target="#icrp-135-인용이-필요한-부분들">ICRP 135 인용이 필요한 부분들</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>핵의학영상검사가 양질의 의료서비스를 제공하기 위해서는 진단목적으로 충분한 영상품질의 담보와 합리적선량저검화가 필요합니다.</p>
<p>방사선방호최적화를 위해서 진단참고수준을 사용함에 있어 DRL을 사용하고 있으나, DRL은 영상품질을 의미하는 지표는 아닙니다. DRL은 방사선양을 제한하는 것이 목적이며, 영상품질을 평가하는 것이 아니라고 ICRP도 분명하게 밝히고 있습니다. 영상품질이 부적절할 정도로 방사선양이 낮은 것은 방사선양 과잉과 마찬가지로 허용할 수 없습니다.</p>
<p>따라서 의료의질 측면에서는 DRL을 통해서 영상품질과 선량최적화를 반드시 동시에 고려해야 합니다. 국가의 장기계획으로써는 더욱 그러합니다 (국책사업의 경우 전문가들이 신뢰할 수 있도록 정책을 펼친다면 해당분야의 발전이 빨라질 것으로 기대하고, 전문가들이 납득하기 어려운 부분을 굳이 강행하면 실효성이 낮아질 것이다 우려됩니다).</p>
<section id="기존의-문제점." class="level3">
<h3 class="anchored" data-anchor-id="기존의-문제점.">기존의 문제점.</h3>
<p>진단참고수준 이하의 투여율을 의료의질 평가지표로 선정하고 있습니다. 이는 다음과 같은 문제들이 파생될 것으로 우려되고 이러한 우려는 문헌에서 보고된 바 있습니다.</p>
<p>1. 방사성의약품 투여량을 진단참고수준 바로 아래의 값으로 변경해 버리게 됩니다. (물론 바람직하게 최신 고가의 스캐너로 변경하는 병원도 있겠지만, 영상품질평가없이 영상품질의 저하는 미미할 것이라 판단하면서 간편하게 투여량은 진단참고수준 바로 아래의 값으로 변경해 버리게 됩니다. 왜냐하면 의료의질 평가 자체에는 영상의품질은 전혀 언급하지도 않았고 투여량만 조사하는데, 병원의 적자는 늘어어만 나는 현실에서는 품질이 더이상 1순위가 되지 않을 수 있습니다. 하지만 약간씩의 투여량 저하도 영상의 품질저하가 될 수 있고, 특히 반복되게 되면 반드시 영상품질저하로 이어지게 됩니다).</p>
<p>2. 질 가산금이 지급되는 경우에는 더욱 그러하리라 예상됩니다.</p>
</section>
<section id="대안1." class="level2">
<h2 class="anchored" data-anchor-id="대안1.">대안1.</h2>
<p>영상품질평가와 연계되어 방사성의약품 투여량 프로토콜이 개선되도록 해야 합니다.</p>
<ol type="1">
<li><p>영상품질평가 시스템 운영</p>
<ul>
<li><p>영상품질 Reference image 제작: torso PET/CT 영상의 경우 List mode로 영상획득이 가능하며, 충분한 시간동안 획득한 양질의 영상을 원하는 영상획득시간으로 분할하면 영상을 재구성할 수 있습니다. <span class="citation" data-cites="hu2022">[<a href="#ref-hu2022" role="doc-biblioref">1</a>]</span> 여러 영상획득시간 중 임상적목적을 달성가능한 최소시간의 영상이 선택될 수 있고, 이러한 영상들로부터 영상품질의 반영하는 파라미터들이 파생되므로 실무적으로 이를 이용하도록 하면됩니다.</p></li>
<li><p>이미 문헌에서 많이 보고되고 있는 지표들 중 가장 간편한 지표는 대표적으로 liver SNR이 있습니다.</p></li>
<li><p>이러한 영상품질 reference image는 스캐너마다 존재해야 하며, 처음 스캐너 설치시에 샘플환자들을 대상으로 만들어지기도 합니다.</p></li>
<li><p>만약에 없다면 언제든지 만들면 됩니다.</p></li>
</ul></li>
<li><p>영상획득 프로토콜의 관리</p>
<ul>
<li><p>영상획득 프로토콜별로 위의 영상품질 reference image와 비교하여 임상적인 목적달성이 가능한 영상인지 확인해야 합니다.</p></li>
<li><p>예시로 digital PET/CT의 등장으로 영상의 품질이 향상될 수 있습니다만, 이를 방사성의약품 투여량을 줄이지 않고, 검사시간을 단축할 수도 있습니다. 기관별로 커스터마이징하여 검사 프로토콜을 결정하고 있기 때문입니다.</p></li>
<li><p>영상획득 프로토콜을 관리한다는 것은 1번의 영상품질평가 시스템으로 만든 reference image의 임상적 목적달성에 충분한 영상품질단계 이상임을 확인해야 한다는 것입니다.</p></li>
<li><p>또한 기록이 남아야 합니다.</p></li>
</ul></li>
<li><p>선량평가위원회</p>
<ul>
<li>검사프로토콜의 만들어지거나 변경이 될 때, 선량평가위원회에서 이를 평가하는 것이 타당합니다. 핵의학과 의사만이 아니라 PET/CT 검사를 많이 의뢰하는 임상의사가 포함되는 것이 바람직합니다.</li>
</ul></li>
</ol>
<p>따라서 요약하자면, 선량평가위원회에서 reference image (및 liver SNR과 같은 객관적 정량적 영상품질지표)를 통해서 해당 프로토콜의 영상품질이 임상적목적에 부합하는 것인지 승인되어야 하고, 승인된 프로토콜을 사용하여 획득된 기관의 값이 DRL 이하여야 합니다. 두가지 모두 만족하면 질가산금이 주어지도록 해야 합니다. (비록 어렵기는 하지만 ICRP에서 권고하는 방법이므로 장기적으로는 핵의학계의 발전에 도움이 된다고 생각됩니다).</p>
<p>예시에서는 digital PET/CT를 다루었지만, 구형 스캐너를 이용하는 경우에는 방사성의약품 투여량을 줄이고 스캔타임을 늘려서 최적화를 할 수도 있습니다. 이 경우는 영상품질이 보존되지만 검사시간이 길어져 병원수익은 감소하지만 질가산금이 당근책이 될 것입니다.</p>
<p>선량평가위원회의 활동은 대한핵의학회에서도 검토할 예정이므로 영상의 품질이 고려되지 않고, 단순히 투여량만 줄인다면 이는 영상품질을 적절히 평가한 후 투여량을 조정하도록 권고할 수 있다.</p>
</section>
<section id="대안2." class="level2">
<h2 class="anchored" data-anchor-id="대안2.">대안2.</h2>
<section id="간-변이계수" class="level3">
<h3 class="anchored" data-anchor-id="간-변이계수">간 변이계수</h3>
<section id="임상영상의-질-지표-가능성" class="level4">
<h4 class="anchored" data-anchor-id="임상영상의-질-지표-가능성">임상영상의 질 지표 가능성</h4>
<p>PET/CT 영상의 질 객관적 평가는 쉬운 일은 아닙니다. 그럼에도 불구하고 임상적인 중요성이 높아 유럽핵의학회와 미국학회에서는 PET/CT 인증 프로그램에서 영상의 품질 객관적인 평가를 시행하고 있습니다.</p>
<p>유럽에서 PET/CT 인증을 진행하고 있는 기구는 유럽핵의학회 산하의 EARL이며 기준은 아래와 같습니다 <span class="citation" data-cites="kaalep2018">[<a href="#ref-kaalep2018" role="doc-biblioref">2</a>]</span>.</p>
<ol type="1">
<li>Uniform cylindrical phantom을 사용한 calibration quality control 에서 SUV bias가 10% 이하일 것</li>
<li>NEMA NU2-2007 body phantom에서 SUV recovery coefficient가 아래의 기준을 만족할 것</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://earl.eanm.org/accreditation-specifications/"><img src="images/clipboard-735047486.png" class="img-fluid figure-img" alt="SUV recovery coefficients for 18F standards 1 and 2 effective as of quarter 3 of 2020: (proposed by EARL)"></a></p>
<figcaption>SUV recovery coefficients for 18F standards 1 and 2 effective as of quarter 3 of 2020: (proposed by EARL)</figcaption>
</figure>
</div>
<p>위에서 언급된 standard 들은 다양한 기종의 PET/CT 스캐너들을 평가하기 위해 제안된 reconstruction mode로 여겨집니다 (영상물리전문가로부터 확인이 필요합니다).</p>
<p>최신의 논문들에서 스캐너에 성능에 따른 최적의 방사성의약품투여량과 영상획득시간 조건을 설정하기 위한 접근방법도 보고되고 있습니다.</p>
<p>2025년 네델란드 그룹에서 보고한 논문에서는 새로운 digital BGO 32-cm axial FOV PET sytem에서 최소 FDG 투여량과 영상획득시간 조절을 얼마나 할 수 있을지를 phantom study를 하였고 아래와 같은 테이블을 보고하였습니다 <span class="citation" data-cites="vandeburgt2025">[<a href="#ref-vandeburgt2025" role="doc-biblioref">3</a>]</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-905693594.png" class="img-fluid figure-img"></p>
<figcaption>EARL1 and EARL2 (2 mm and 4 mm) compliance illustrating coefficient of variation (COV) at various [18 F]FDG activity dosages and scan durations for reconstructions without (A) and with (B) precision deep learning image enhancement (PDL).</figcaption>
</figure>
</div>
<p>위 테이블에서 언급된 COV는 아래와 같이 phantom의 배경에서 측정한 변이계수입니다 .</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/phantom.JPG" class="img-fluid figure-img"></p>
<figcaption>Visualization of the template of the NEMA IEC body phantom geometry used by the in-house-developed algorithm, showing the volumes-of-interest (VOIs) of the six spheres identified on the PET image (red circles) and the rectangular background VOIs (3 cm, n = 9, green squares) in axial view.</figcaption>
</figure>
</div>
<p>EARL에서는 COV가 15% 이내를 acceptable하다고 제안하고 있으므로 저자들은 체중당 투여량과 영상획득시간의 조합이 15% 이내가 되는 것을 초록색으로 표시하였고 (이들은 COV가 15% 이내이기도 하지만 다른 영상품질지표들도 기준에 모두 만족한 것이어야 했습니다), 이를 기준으로 영상의 질이 유지하면서도 투여량을 4 Mbq/kg에서 영상획득시간을 고려하여 특정 투여량까지 낮출 수 있을 것이라고 보고하였습니다.</p>
<p>이 논문이 시사하는 바는 우리가 임상영상에서도 간에서의 COV를 측정하여 15% 이하를 유지하면 방사성의약품의 투여량을 진단참고수준이하로 내려도 타당성이 있다는 것입니다. (물론 위 논문은 COV를 phantom study에서 구한 것입니다. 하지만 문헌고찰해 보면 clinical PET/CT image에서 liver CoV가 15%를 적절한 영상의 기준으로 언급한 논문을 쉽게 찾아 볼 수 있습니다.)</p>
<p>다만, 한가지 더 고려할 사항이 있습니다.</p>
<p>위 논문에서도 EARL의 다른 기준들을 모두 만족하면서 COV를 만족한 것을 보였으며 COV는 noise에 해당하는 것으로 영상의 질을 모두 보여주는 지표는 아니라는 점입니다.</p>
<p>그래서 아래의 수정된 제안에서 부가적인 지표로 EARL 인증에서 요구하는 SUV bias와 SUV recovery coeffcient가 기준을 만족하는 지표를 추가하는 것의 검토가 필요합니다. 그런데 영상검사적정성평가에서 지표7로 PET 촬영장치 정도간리 시행률이 있어 중복처럼 보입니다.</p>
<p><img src="images/clipboard-319065620.png" class="img-fluid"></p>
<p>하지만 세부 내용을 검토해 보면 실제로는 내용이 다릅니다. 그리고 정도관리위원회와 공동으로 검토해야 할 사항으로 판단됩니다.</p>
<p>그리고 마지막으로 이러한 제안을 위원회에서 하기 전에 논문을 포함한 위 검토사항이 논리적인이나 기술적인 문제가 없는지 대한핵의학회 영상물지전문가에서 검토를 요청할 필요가 있습니다. (검토 결과를 위원회에서 화상으로 의견제시하면서 설명해주시면 interactive하게 질문도 하도 더 좋을 것 같습니다). 특히 reconstruction을 각 병원별로 고유의 방법으로 해도 되는지 아니면 EARL standard 1 또는 standard 2로 반드시 해야만 하는지가 궁금합니다.</p>
</section>
</section>
<section id="수정된-지표-제안" class="level3">
<h3 class="anchored" data-anchor-id="수정된-지표-제안">수정된 지표 제안</h3>
<section id="기존의-제안" class="level4">
<h4 class="anchored" data-anchor-id="기존의-제안">기존의 제안</h4>
<ul>
<li>영상검사 적정성 평가 세부시행계회상의 지표5는 원래 아래와 같았음.</li>
</ul>
<p><img src="images/clipboard-1769591554.png" class="img-fluid"></p>
</section>
<section id="수정-제안" class="level4">
<h4 class="anchored" data-anchor-id="수정-제안">수정 제안</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 8%">
<col style="width: 91%">
</colgroup>
<thead>
<tr class="header">
<th>항목</th>
<th>내용</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>지표명</strong></td>
<td>PET 방사성의약품 진단참고수준 이하 투여율</td>
</tr>
<tr class="even">
<td><strong>정의</strong></td>
<td>충분한 영상의 질을 유지하면서 F-18 FDG PET 방사성의약품 투여량이 진단참고수준 이하로 투여한 비율</td>
</tr>
<tr class="odd">
<td><strong>산출식</strong></td>
<td><span class="math display">\[\frac{\text{체중당 진단참고수준 이하 투여 중 간 변이계수 15\% 이하인 건수}}{\text{PET-토르소 검사건수}} \times 100\]</span></td>
</tr>
<tr class="even">
<td><strong>선정근거</strong></td>
<td><p>- DRL(Diagnostic Reference Level)은 환자에게 투여하는 방사능(MBq)을 기준으로 하며, DRL 이하 투여 시 충분한 영상의 질을 유지하면서 환자 피폭을 최적화할 수 있음.</p>
<p>- 의료방사선안전연구센터 최종보고서(원자력안전위원회, 2017) 참조</p></td>
</tr>
<tr class="odd">
<td><strong>세부기준</strong></td>
<td><p>- 평가대상 검사: 각 장비별 PET – 토르소 (F-18 FDG)</p>
<p>- <code>*</code> <code>체중당 진단참고수준 이하 투여</code>의 기준: 5.29 MBq/kg보다 10% 적은 4.76 MBq/kg</p>
<p>- 간변이계수: 정상 간우엽에 직경 3cm의 구형 관심영역에서 측정한 표준화섭취계수 표준편차를 평균으로 나눈 측정치</p>
<p>- 단 간암, 간전이 등으로 정상 간우엽에서 측정이 불가한 경우는 간변이계수 측정에서 제외</p>
<p>- 총연간검사건수에 대한 장비별 검사건수분율을 가중한 뒤 모든 장비의 합을 구하여 지표로 사용</p></td>
</tr>
<tr class="even">
<td><strong>제외기준</strong></td>
<td>만 18세 미만 환자</td>
</tr>
</tbody>
</table>
<p><code>*</code> 체중당 진단참고수준은 일단 370 MBq/70 kg로 하였지만 revised DRL에서 체중당 진단참고수준이 산출되었으면 변경하는 것이 타당하겠음</p>
</section>
<section id="수정제안-부가제안에-대한-세부-설명" class="level4">
<h4 class="anchored" data-anchor-id="수정제안-부가제안에-대한-세부-설명">수정제안 + 부가제안에 대한 세부 설명</h4>
<ol start="2" type="1">
<li>선량관리위원회 활동 (1점)
<ol type="1">
<li>EARL 권고와 같이 기종별로 FDG 투여량과 영상획득시간을 최적화하기 위한 자료 (논문상의 근거 포함)가 확보되어 있고 이에 근거하여 투여량/영상획득시간 프로토콜이 제시되어 있다.</li>
<li>1년 주기 또는 새로운 장비의 설치 또는 (방사성의약품의 투여량 또는 영상획득시간의 변경이 포함된) 검사 프로토콜의 변경이 있을 때마다, 병원별로 자체적으로 설정한 투여량 기준 이상이거나 영상품질 기준 이하인 경우들을 대상으로 최적화를 검토한 기록이 있다.</li>
</ol></li>
<li>영상품질과 연계된 방사성의약품 투여량 (1점)
<ol type="1">
<li>장비별로 지정한 날짜로부터 연속된 100건의 검사에서 투여량이 (체중당) 진단참고수준보다 10% 이상 적은 경우
<ol type="1">
<li>(대한핵의학회) 가이드라인에서는 투여량의 경우 권고치 +- 10% 구간을 사용하므로 진단참고수준보다 적은 양이라 함은 10% 이상 차이로 규정하였다.</li>
<li>영상품질을 liver CoV로 진행함에 따라 liver에 VOI를 설정할 수 없는 간암이나 간전이 등의 환자는 제외하여 합이 100건이 되도록 함</li>
</ol></li>
<li>1항의 경우 내에서 liver CoV가 15% 이하인 수
<ol type="1">
<li>EARL에서는 CoV 15%가 clinically acceptable하지만, 이는 변별력이 없을 수 있으므로 시범사업 또는 향후의 자료가 구축됨에 따라 10%를 상향조정 될 수도 있음.</li>
</ol></li>
<li>장비별로 1항과 2항을 모두 만족하는 경우의 수에서 총연간검사건수에 대한 장비별 검사건수분율을 가중한 뒤 모든 장비의 합을 구하여 지표로 사용</li>
<li>시범사업을 통해 1항과 2항을 모두 만족하는 비율에 대한 국내자료가 구축 되면 적절한 cut-off를 제시하여 관리. 그 전까지는 90%를 위원회에서는 제안함.</li>
<li>SUV bias 및 SUV recovery coefficiency, CoV 평가방법은 EARL 준용</li>
</ol></li>
</ol>
</section>
<section id="icrp-135-인용이-필요한-부분들" class="level4">
<h4 class="anchored" data-anchor-id="icrp-135-인용이-필요한-부분들">ICRP 135 인용이 필요한 부분들</h4>
<ol start="117" type="1">
<li>표본조사에서 DRL값을 도출하기 위하여 선량계측 데이터를 단순히 한 통에 넣는 것은 더 이상 전혀 만족스럽지 않은데, 이는 진정한 최적화가 아니라 단지 DRL 바로 아래에 선량 표본조사 결과 값을 밀집시키는 것일 수도 있다(Sutton 등, 2014). 방사선방호의 최적화를 통해 요구하는 수준의 영상품질을 확보하기 위해서는 보다 적극적인 접근이 필요하다. 두 번째 단계 즉, DRL값을 결정하는 데 사용되는 분포의 중앙값은 최적화를 돕는 추가 도구로 사용할 수 있다. DRL값은 제3 사분위수이므로 최적화 작업이 계속 진행됨에 따라 중앙값이 모범관행을 판단할 수 있는 보다 좋은 지침을 제공할 수 있다. 중앙값은 DRL값과 함께 영상품질과 환자선량의 최적화를 돕는 데 사용될 수 있다.</li>
</ol>
<p>2.7. 영상품질</p>
<ol start="126" type="1">
<li><p>방호최적화를 달성하는 방법에 대해 의학물리사, 영상의학자 및 방사선사의 논의에서 가장 빈번하게 사용되는 접근법은 검사의 DRL값을 준수하는 것이다. 그러나 DRL양은 영상품질의 서술자descriptor가 아니다. 한 보건센터에서 DRL양의 중앙값이 특정 값보다 높거나 낮은 것이 영상이 특정 임상목적에 적절하거나 부적 절하다는 것을 나타내지는 않는다. 영상품질 평가를 국가 DRL값의 준수로 대체하는 것은 적절하지 않다.</p></li>
<li><p>진단촬영 검사의 최우선 순위는 임상목적에 충분한 영상품질을 얻는 것이므로, 모든 절차의 영상이 필요한 모든 진단정보를 제공하고 임상목적이 위태롭게 되지 않도록 하는 것이다. 이것은 모든 영상이 고품질임을 의미하지는 않는다. 일부기기(예: 형광투시)에서는 개별적으로 낮은 품질을 가진 일련의 영상들도 합쳐서 필요한 임상 정보를 제공할 수 있다.</p></li>
<li><p>영상품질이 부적절할 정도로 방사선 양이 낮은 것은 방사선 양 과잉과 마찬가지로 허용할 수 없다. 영상품질이 임상목적에 적합하지 않은 경우, 방사선은 임상적 이득을 제공하지 않으므로 검사가 반복되고, 환자는 반복 검사로 추가 방사선을 받는다. 데이터가 임상 현장에서 환자 표본조사로 수집되므로 DRL양에 관한 데이터를 모으면 대부분 영상의학자가 임상목적에 충분한 영상을 생성하는 방사선양이라고 동의하는 방사선 양에 대한 정보를 얻을 수 있다고 가정하고 있다.</p></li>
<li><p>영상품질 기준 없이 DRL양에만 초점을 맞추면 영상품질이 손상되는 어떤 단계까지 DRL값이 계속 하향 조정될 수 있다. 촬영 프로토콜을 수정할 때는 진단목적에 적합한 영상품질이 확보되도록 하는 것이 중요하다. 따라서 최적화는 영상품질과 환자선량 사이 균형을 맞추어야 한다. 방사선 양이 감소하더라도 영상품질은 적절한 수준으로 유지되어야 한다.</p></li>
<li><p>DRL 데이터를 수집하기 전에 표본조사자는 관심 선량계측량의 정확도에 특히 주의를 기울이면서 촬영장비가 적합하게 작동하고 있는지를 적절한 QC 프로그램을 통해 확인하고, 촬영장비가 임상업무에 적절한 품질의 임상 영상을 제공하는지 확인해야 한다. 가능하면 언제나 영상품질을 판단하는 증거기반 기준을 채택해 야 한다. 다양한 촬영업무에 필요한 영상품질 수준에 대한 지침은 한정되어 있다. 지금까지는 영상의학자 평가 형식의 객관적 척도만 사용되고 있다. 유럽위원회는 영상의 진단 잠재력을 판단할 때 영상을 채점하는 데 사용할 수 기준과 함께 지침을 작성했다(EC, 1996a,b, 1999a). 이 기준이나 유사한 기준이 영상품질에 영향을 미칠 수 있는 변경이 있을 때마다 영상품질을 평가하는 데 사용될 수 있다. 임상영상 기준을 사용하여 임상영상을 평가하려면 영상의학자 참여가 필요하다.</p></li>
<li><p>다양한 검사에 적합한 영상품질 변수에 대한 상당한 추가 데이터가 필요하다. 영상대비와 촬영시스템의 성능을 특성화하기 위해 다양한 측정량이 한동안 사용되었다. 이런 측정량은 전문적 측정기술을 필요로 하며 대부분 촬영시스템을 위해서는 제작사가 공급한다. 병원 의학물리사가 이러한 측정을 수행하는 데 사용할 수 있는 기술이 널리 보급되고 있다. 이러한 측정량에는 변조전달함수, 시스템 전달인자 및 잡음출력 스펙트럼이 포함된다(ICRU, 1995). 측정량은 장래의 디지털촬영시스템을 위한 최적화 과정의 일환으로 적절한 영상품질 수준을 선정할 수 있도록 유용한 정보를 의학물리사에게 제공해야 한다. 이러한 정량적 측정은 촬영 검출기의 고유성능은 잘 묘사하지만, 임상 영상품질(임상업무) 측면에서 시스템을 특성화하지는 않는다.</p></li>
<li><p>영상 평가의 객관적 측정에 대한 연구가 수행되었지만, 물리적 측정과 영상의학자 판단 사이의 관계는 아직까지 정립되지 않았다(De Crop 등, 2015). 이 프로세스를 지원하기 위해서는, 주요 변수가 선량만이 아니고 선량 당 영상품질이 되도록 CT 및 기타 전문분야의 허용 가능한 영상품질 수준에 대한 보다 자세한 분 석이 필요하다. 이 분야에 대한 추가 연구와 임상 촬영업무에 연계된 객관적 영상품질 변수의 크기에 대한 추가 데이터가 시급하게 필요하다.53)</p></li>
</ol>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-hu2022" class="csl-entry" role="listitem">
1. Hu Y, Liu G, Yu H, Wang Y, Li C, Tan H, et al. <a href="https://doi.org/10.2967/jnumed.121.262038">Feasibility of Acquisitions Using Total-Body PET/CT with an Ultra-Low 18F-FDG Activity</a>. Journal of Nuclear Medicine: Official Publication, Society of Nuclear Medicine. 2022;63:959–65.
</div>
<div id="ref-kaalep2018" class="csl-entry" role="listitem">
2. Kaalep A, Sera T, Oyen W, Krause BJ, Chiti A, Liu Y, et al. EANM/EARL FDG-PET/CT accreditation - summary results from the first 200 accredited imaging systems. European Journal of Nuclear Medicine and Molecular Imaging [Internet]. 2018;45:412–22. Available from: <a href="https://doi.org/10.1007/s00259-017-3853-7">https://doi.org/10.1007/s00259-017-3853-7</a>
</div>
<div id="ref-vandeburgt2025" class="csl-entry" role="listitem">
3. Burgt A van de, Dibbets-Schneider P, Kotasidis F, Geus-Oei L-F de, Rietbergen DDD, Velden FHP van. <a href="https://doi.org/10.1016/j.ejmp.2025.104935">[18F]FDG administered activity reduction capabilities of a 32-cm axial field-of-view solid-state digital bismuth germanium oxide PET/CT system while maintaining EARL compliance</a>. Physica medica: PM: an international journal devoted to the applications of physics to medicine and biology: official journal of the Italian Association of Biomedical Physics (AIFB). 2025;131:104935.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="RadiationSafetyNM/website" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<script src="../../scripts/tooltip.js"></script>




</body></html>